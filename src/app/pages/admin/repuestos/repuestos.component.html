<!-- FORM -->
<div class="form-container">
  <h2>Agregue un nuevo Producto</h2>

  <form class="ticket-form" [formGroup]="formP" (ngSubmit)="save()" enctype="multipart/form-data">

    <div class="form-group">
      <label for="nombre_producto">Nombre del producto</label>
      <input type="text" formControlName="nombre_producto" id="nombre_producto" required>
    </div>

    <div class="form-group">
      <label for="categoria_id">Categoría</label>
      <input type="text" formControlName="categoria_id" id="categoria_id" required>
    </div>

    <div class="form-group">
      <label for="nombre_comercial">Nombre Comercial</label>
      <input type="text" formControlName="nombre_comercial" id="nombre_comercial">
    </div>

    <div class="form-group">
      <label for="codigo_sunat">Código Sunat</label>
      <input type="text" formControlName="codigo_sunat" id="codigo_sunat" required>
    </div>

    <div class="form-group">
      <label for="tipo_producto">Tipo de Producto</label>
      <input type="text" formControlName="tipo_producto" id="tipo_producto" required>
    </div>

    <div class="form-group">
      <label for="tipo_existencia">Tipo de Existencia</label>
      <input type="text" formControlName="tipo_existencia" id="tipo_existencia" required>
    </div>

    <div class="form-group">
      <label for="compra">Precio de Compra</label>
      <input type="number" formControlName="compra" id="compra" required>
    </div>

    <div class="form-group">
      <label for="kardex">Kardex</label>
      <input type="text" formControlName="kardex" id="kardex" required>
    </div>

    <div class="form-group">
      <label for="stock_minimo">Stock Mínimo</label>
      <input type="number" formControlName="stock_minimo" id="stock_minimo" required>
    </div>

    <div class="form-group">
      <label for="stock_maximo">Stock Máximo</label>
      <input type="number" formControlName="stock_maximo" id="stock_maximo" required>
    </div>

    <div class="form-group">
      <label for="peso">Peso</label>
      <input type="number" formControlName="peso" id="peso" required>
    </div>

    <!-- <div class="form-group">
      <label for="categoria_id">Categoría</label>
      <select id="categoria_id" formControlName="categoria_id" required>
        <option *ngFor="let categoria of categorias" [value]="categoria.categoria_id">
          {{ categoria.categoria_name }}
        </option>
      </select>
    </div> -->

    <div class="form-group">
      <label for="img">Imagen</label>
      <input type="file" id="imagen_url" (change)="onFileSelected($event)" accept="image/*" required>
    </div>

    <button type="submit" class="submit-button" cdkFocusInitial [disabled]="!isFormValid()">Agregar repuesto</button>
  </form>
</div>

<br>
<!-- BUSCADOR -->
<div class="ticket-controls">
  <div class="search-container">
    <input type="text" placeholder="Buscar repuesto" class="search-input">
    <button class="search-button">
      <i class="fas fa-search"></i>
    </button>
  </div>
</div>
<!-- TABLA DE BD -->
<table class="task-table">
  <thead>
    <tr>
      <th>Id</th>
      <th>Nombre</th>
      <th>Codigo</th>
      <th>Categoría</th>
      <th>Imagen</th>
      <th>PDF</th>
      <th>Action</th>
    </tr>
  </thead>

  @for (repuesto of producto; track $index){
    <tbody>
      <tr>
        <td>{{repuesto.producto_id}}</td>
        <td>
          <div class="title">{{repuesto.nombre_producto}}</div>
          <div class="subtitle">{{repuesto.categoria_id}}
          </div>
        </td>
        <td>
          <div class="subtitle">{{repuesto.codigo_sunat}}</div>
        </td>

        <td>
          <span class="status in-progress">{{repuesto.categoria_id}}</span>
        </td>

        <td>
          <div class="title">{{repuesto.codigo_sunat}}</div>
        </td>
        <!-- <td class="action-icons">
          <i class="fas fa-edit" (click)="openDialogEdit(repuesto)"></i>
          <i class="fas fa-trash" (click)="deleteRepuesto(repuesto.id)"></i>
        </td> -->
      </tr>
      <!-- Repite este bloque para cada fila, cambiando los datos según corresponda -->
    </tbody>
    }
</table>
